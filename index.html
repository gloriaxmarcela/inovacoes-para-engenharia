<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Propostas de Projeto ‚Äì Inova√ß√µes para Engenharia</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="styles.css"> 
</head>
<body>

    <header class="institutional-header">
        <p><strong>Universidade Federal do ABC (UFABC)</strong></p>
        <p>Centro de Engenharia, Modelagem e Ci√™ncias Sociais Aplicadas</p>
        <p><strong>Disciplina:</strong> Inova√ß√µes para Engenharia | <strong>Ano:</strong> 2025</p>
        <p><strong>Professor:</strong> Jos√© Fernando Queiruga Rey</p>
    </header>

    <div class="container">
        
        <header class="project-header">
            <h1>Propostas de Projeto</h1>
        </header>

        <main>
            <section id="disciplina" class="content-section">
                <h2>Sobre a Disciplina</h2>
                <p>O objetivo central da disciplina "Inova√ß√µes para Engenharia" √© trabalhar com os alunos conceitos de inova√ß√£o, exercitando a metodologia "Design Thinking" na abordagem de propostas de solu√ß√£o a problemas reais, culminando na prototipagem de solu√ß√µes e na apresenta√ß√£o de um "Pitch".</p>
            </section>
            
            <section id="creditos" class="content-section">
                <h2>Cr√©ditos e Equipe</h2>
                 <h4>Equipe do Projeto</h4>
                <ul class="team-list">
                    <li>Gl√≥ria Marcela de Barros Moraes</li>
                    <li>Nome do Integrante 2</li>
                    <li>Nome do Integrante 3</li>
                    <li>Nome do Integrante 4</li>
                    <li>Nome do Integrante 5</li>
                    <li>Nome do Integrante 6</li>
                    <li>Nome do Integrante 7</li>
                </ul>
            </section>
            
            <section id="projetos" class="content-section">
                <h2>Propostas Sugeridas</h2>
                <p>Clique abaixo para acessar a an√°lise completa de cada projeto antes de votar.</p>
                <div class="projects-grid">
                    <div class="project-card"><h3>üõ°Ô∏è Eyeguard</h3><a href="eyeguard.html" class="btn-details">Ver An√°lise Completa</a></div>
                    <div class="project-card"><h3>‚òÄÔ∏èüåç Postes Solares</h3><a href="postes.html" class="btn-details">Ver An√°lise Completa</a></div>
                    <div class="project-card"><h3>üíß Resfriamento Data Center</h3><a href="resfriamento-datacenter.html" class="btn-details">Ver An√°lise Completa</a></div>
                    <div class="project-card"><h3>Projeto E</h3><a href="#" class="btn-details">P√°gina em Constru√ß√£o</a></div>
                    <div class="project-card"><h3>Projeto F</h3><a href="#" class="btn-details">P√°gina em Constru√ß√£o</a></div>
                    <div class="project-card"><h3>Projeto G</h3><a href="#" class="btn-details">P√°gina em Constru√ß√£o</a></div>
                </div>
            </section>

            <section id="votacao-equipe" class="content-section">
                <h2>üó≥Ô∏è Vota√ß√£o da Equipe</h2>
                <div class="voting-container">
                    <div class="vote-box">
                        <h3>1. Registre seu Voto</h3>
                        <form id="vote-form">
                            <label for="integrante-select">Selecione seu identificador (an√¥nimo):</label>
                            <select id="integrante-select" required>
                                <option value="">-- Escolha um integrante --</option>
                            </select>
                            <div id="project-choices" class="hidden">
                                <p><strong>Selecione at√© 3 propostas:</strong></p>
                                <div class="choice-group"><input type="checkbox" id="vote-eyeguard" name="projeto" value="eyeguard"><label for="vote-eyeguard">üõ°Ô∏è Eyeguard</label></div>
                                <div class="choice-group"><input type="checkbox" id="vote-postes" name="projeto" value="postes"><label for="vote-postes">‚òÄÔ∏èüåç Postes Solares</label></div>
                                <div class="choice-group"><input type="checkbox" id="vote-datacenter" name="projeto" value="datacenter"><label for="vote-datacenter">üíß Resfriamento Data Center</label></div>
                                <div class="choice-group"><input type="checkbox" id="vote-projetoE" name="projeto" value="projetoE"><label for="vote-projetoE">Projeto E</label></div>
                                <div class="choice-group"><input type="checkbox" id="vote-projetoF" name="projeto" value="projetoF"><label for="vote-projetoF">Projeto F</label></div>
                                 <div class="choice-group"><input type="checkbox" id="vote-projetoG" name="projeto" value="projetoG"><label for="vote-projetoG">Projeto G</label></div>
                            </div>
                        </form>
                    </div>
                    <div class="results-box">
                        <h3>2. Resultados Atuais</h3>
                        <div class="results-display">
                            <div class="result-item"><span class="project-name">üõ°Ô∏è Eyeguard</span><span class="vote-counter" id="resultado-eyeguard">0 votos</span></div>
                            <div class="result-item"><span class="project-name">‚òÄÔ∏èüåç Postes Solares</span><span class="vote-counter" id="resultado-postes">0 votos</span></div>
                            <div class="result-item"><span class="project-name">üíß Resfriamento Data Center</span><span class="vote-counter" id="resultado-datacenter">0 votos</span></div>
                            <div class="result-item"><span class="project-name">Projeto E</span><span class="vote-counter" id="resultado-projetoE">0 votos</span></div>
                            <div class="result-item"><span class="project-name">Projeto F</span><span class="vote-counter" id="resultado-projetoF">0 votos</span></div>
                            <div class="result-item"><span class="project-name">Projeto G</span><span class="vote-counter" id="resultado-projetoG">0 votos</span></div>
                        </div>
                        <hr>
                        <p id="votos-restantes"><strong>Votos restantes:</strong> <span id="votos-restantes-count">7</span></p>
                    </div>
                </div>
            </section>
        </main>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const TOTAL_INTEGRANTES = 7;
            const MAX_VOTOS_POR_PESSOA = 3;
            // Array de projetos ATUALIZADO
            const PROJETOS = ['eyeguard', 'postes', 'datacenter', 'projetoE', 'projetoF', 'projetoG'];
            
            const integranteSelect = document.getElementById('integrante-select');
            const projectChoices = document.getElementById('project-choices');
            const voteForm = document.getElementById('vote-form');
            const cancelBtn = document.getElementById('cancel-vote-btn');
            const votosRestantesCount = document.getElementById('votos-restantes-count');

            function inicializar() {
                popularSelecaoDeIntegrantes();
                atualizarResultados();
            }

            function popularSelecaoDeIntegrantes() {
                integranteSelect.innerHTML = '<option value="">-- Escolha um integrante --</option>';
                let votosComputados = 0;
                for (let i = 1; i <= TOTAL_INTEGRANTES; i++) {
                    const option = document.createElement('option');
                    option.value = i;
                    option.textContent = `Integrante ${i}`;
                    
                    if (localStorage.getItem(`voto_integrante_${i}`)) {
                        option.disabled = true;
                        option.textContent += ' (J√° votou)';
                        votosComputados++;
                    }
                    integranteSelect.appendChild(option);
                }
                votosRestantesCount.textContent = TOTAL_INTEGRANTES - votosComputados;
            }

            function atualizarResultados() {
                const contagemVotos = {};
                PROJETOS.forEach(p => contagemVotos[p] = 0);

                for (let i = 1; i <= TOTAL_INTEGRANTES; i++) {
                    const votoString = localStorage.getItem(`voto_integrante_${i}`);
                    if (votoString) {
                        const votosDoIntegrante = JSON.parse(votoString);
                        votosDoIntegrante.forEach(voto => {
                            if (contagemVotos[voto] !== undefined) {
                                contagemVotos[voto]++;
                            }
                        });
                    }
                }

                PROJETOS.forEach(p => {
                    const el = document.getElementById(`resultado-${p}`);
                    if(el) { // Adiciona uma verifica√ß√£o para seguran√ßa
                        el.textContent = `${contagemVotos[p]} votos`;
                    }
                });
            }

            integranteSelect.addEventListener('change', () => {
                if (integranteSelect.value) {
                    projectChoices.classList.remove('hidden');
                    integranteSelect.disabled = true;
                } else {
                    projectChoices.classList.add('hidden');
                }
            });
            
            function limparSelecoes() {
                 document.querySelectorAll('input[name="projeto"]:checked').forEach(checkbox => checkbox.checked = false);
            }

            // Precisamos adicionar os bot√µes ao formul√°rio para que o script os encontre
            projectChoices.insertAdjacentHTML('beforeend', `
                <div classs="button-group">
                    <button type="submit" id="submit-vote-btn">Confirmar Votos</button>
                    <button type="button" id="cancel-vote-btn">Alterar Integrante</button>
                </div>
            `);
            
            // Agora podemos adicionar os event listeners aos bot√µes
            document.getElementById('cancel-vote-btn').addEventListener('click', () => {
                integranteSelect.value = '';
                integranteSelect.disabled = false;
                projectChoices.classList.add('hidden');
                limparSelecoes();
            });
            
            voteForm.addEventListener('submit', (e) => {
                e.preventDefault();
                
                const integranteId = integranteSelect.value;
                const projetosSelecionados = document.querySelectorAll('input[name="projeto"]:checked');

                if (projetosSelecionados.length === 0) {
                    alert('Por favor, selecione pelo menos um projeto.');
                    return;
                }

                if (projetosSelecionados.length > MAX_VOTOS_POR_PESSOA) {
                    alert(`Voc√™ pode selecionar no m√°ximo ${MAX_VOTOS_POR_PESSOA} projetos.`);
                    return;
                }

                const votosArray = Array.from(projetosSelecionados).map(checkbox => checkbox.value);
                
                localStorage.setItem(`voto_integrante_${integranteId}`, JSON.stringify(votosArray));
                
                projectChoices.classList.add('hidden');
                integranteSelect.disabled = false;
                voteForm.reset(); // Limpa as checkboxes

                inicializar();
                
                alert(`Voto do Integrante ${integranteId} computado com sucesso!`);
            });

            inicializar();
        });
    </script>
</body>
</html>
